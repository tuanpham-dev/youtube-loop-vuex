(function(e){function t(t){for(var n,r,s=t[0],d=t[1],l=t[2],c=0,h=[];c<s.length;c++)r=s[c],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&h.push(o[r][0]),o[r]=0;for(n in d)Object.prototype.hasOwnProperty.call(d,n)&&(e[n]=d[n]);u&&u(t);while(h.length)h.shift()();return a.push.apply(a,l||[]),i()}function i(){for(var e,t=0;t<a.length;t++){for(var i=a[t],n=!0,s=1;s<i.length;s++){var d=i[s];0!==o[d]&&(n=!1)}n&&(a.splice(t--,1),e=r(r.s=i[0]))}return e}var n={},o={app:0},a=[];function r(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=n,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],d=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=d;a.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"04ed":function(e,t,i){},"3b00":function(e,t,i){},"56d7":function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("2b0e"),o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("Header"),i("div",{staticClass:"main"},[i("div",{staticClass:"container"},[e.hasVideo?i("ul",{staticClass:"video-list"},e._l(e.videos,(function(e,t){return i("li",{key:e.id,staticClass:"video-item"},[i("Video",{attrs:{video:e,index:t}})],1)})),0):e._e()])])],1)},a=[],r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("header",{staticClass:"header"},[i("div",{staticClass:"container"},[i("a",{staticClass:"header__logo",attrs:{href:"#"}},[e._v("YouTube Loop")]),e.videosCount>0?i("div",{staticClass:"header__controls"},[e.isPlaying?e._e():i("Button",{on:{click:function(t){return e.playVideo(0)}}},[e._v("Play")]),e.isPlaying?i("Button",{on:{click:e.stopPlaying}},[e._v("Stop")]):e._e(),e.isPlaying&&e.videosCount>1?i("Button",{on:{click:e.playPreviousVideo}},[e._v("Previous")]):e._e(),e.isPlaying&&e.videosCount>1?i("Button",{on:{click:e.playNextVideo}},[e._v("Next")]):e._e()],1):e._e(),i("div",{staticClass:"header__input-group"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.input,expression:"input"}],staticClass:"header__input",attrs:{type:"text",placeholder:"Enter YouTube URL or Video ID"},domProps:{value:e.input},on:{input:function(t){t.target.composing||(e.input=t.target.value)}}}),i("div",{staticClass:"header__input-group-append"},[i("Button",{attrs:{color:"blue"},on:{click:function(t){return e.addVideo()}}},[e._v("Go Loop!")])],1)])])])},s=[],d=i("5530"),l=i("2f62"),u=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("button",e._g({staticClass:"button",class:e.color?"button--"+e.color:""},e.$listeners),[e._t("default")],2)},c=[],h={props:{color:String}},v=h,p=(i("999d"),i("2877")),m=Object(p["a"])(v,u,c,!1,null,null,null),f=m.exports;i("ac1f"),i("5319"),i("1276");function g(e){var t="",i=e.replace(/(>|<)/gi,"").split(/(vi\/|v=|\/v\/|youtu\.be\/|\/embed\/)/);return void 0!==i[2]?(t=i[2].split(/[^0-9a-z_-]/i),t=t[0]):t=e,t}var y={components:{Button:f},data:function(){return{input:""}},computed:{videosCount:function(){return this.$store.state.videos.length},isPlaying:function(){return-1!==this.$store.state.playingVideo.id}},methods:Object(d["a"])({addVideo:function(){var e=g(this.input);e&&this.$store.dispatch("addVideo",{youtubeId:e})}},Object(l["b"])(["playVideo","stopPlaying","playNextVideo","playPreviousVideo"]))},b=y,V=(i("eadf"),Object(p["a"])(b,r,s,!1,null,null,null)),x=V.exports,_=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"video"},[i("div",{staticClass:"video__player"},[i("YouTube",{attrs:{videoId:e.video.youtubeId},on:{ready:e.onVideoLoaded,error:e.onError,playing:e.onPlaying,paused:e.onPaused,ended:e.onEnded}})],1),i("Slider",{directives:[{name:"show",rawName:"v-show",value:e.videoLoaded,expression:"videoLoaded"}],staticClass:"video__volume-slider",attrs:{orientation:"vertical"},model:{value:e.volume,callback:function(t){e.volume=t},expression:"volume"}}),i("Slider",{directives:[{name:"show",rawName:"v-show",value:e.videoLoaded,expression:"videoLoaded"}],staticClass:"video__range-slider",attrs:{range:!0,max:e.duration},model:{value:e.range,callback:function(t){e.range=t},expression:"range"}}),i("div",{directives:[{name:"show",rawName:"v-show",value:e.videoLoaded,expression:"videoLoaded"}],staticClass:"video__info",domProps:{innerHTML:e._s("Volume: "+e.volume+" — Range: "+e.rangeStart+" → "+e.rangeEnd)}}),i("div",{staticClass:"video__buttons"},[e.canMoveUp?i("Button",{on:{click:function(t){return e.moveVideoUp(e.index)}}},[e._v("Move Up")]):e._e(),e.canMoveDown?i("Button",{on:{click:function(t){return e.moveVideoDown(e.index)}}},[e._v("Move Down")]):e._e(),i("Button",{attrs:{color:"red"},on:{click:function(t){return e.removeVideo(e.index)}}},[e._v("Remove Video")])],1)],1)},w=[],P=(i("a9e3"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div")}),S=[],L=(i("d3b7"),i("53ca"));function D(){return new Promise((function(e){if("object"!==Object(L["a"])(window.YT)||"function"!==typeof window.YT.ready){var t=document.createElement("script");t.src="https://www.youtube.com/iframe_api";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(t,i),window.onYouTubeIframeAPIReady=function(){e(window.YT)}}else window.YT.ready((function(){e(window.YT)}))}))}var C=null;function E(){return C||(C=D()),C}var k={props:{videoId:String},mounted:function(){var e=this;this.player=E().then((function(t){e.playerInstance=new t.Player(e.$el,{videoId:e.videoId,playerVars:{html5:1},events:{onReady:function(){return e.$emit("ready",e.playerInstance)},onStateChange:function(i){i.data===t.PlayerState.PLAYING?e.$emit("playing"):i.data===t.PlayerState.PAUSED?e.$emit("paused"):i.data===t.PlayerState.ENDED&&e.$emit("ended")},onError:function(){e.$emit("error")}}})}))}},M=k,O=Object(p["a"])(M,P,S,!1,null,null,null),I=O.exports,$=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"container",class:e.containerClass,on:{click:e.onBarClick}},[i("span",{staticClass:"slider__range",style:e.rangeStyle}),e.range?e._e():i("span",{staticClass:"slider__handle",style:e.handleStyle,attrs:{tabindex:"0",role:"slider","aria-valuemin":e.min,"aria-valuenow":"value","aria-valuemax":"max","aria-labelledby":e.ariaLabelledBy},on:{mousedown:function(t){return e.onHandleMouseDown(t)},keydown:function(t){return e.onHandleKeyDown(t)}}}),e.range?i("span",{staticClass:"slider__handle",style:e.rangeStartHandleStyle,attrs:{tabindex:"0",role:"slider","aria-valuemin":e.min,"aria-valuenow":"value ? value[0] : null","aria-valuemax":"max","aria-labelledby":e.ariaLabelledBy},on:{mousedown:function(t){return e.onHandleMouseDown(t,0)},keydown:function(t){return e.onHandleKeyDown(t,0)}}}):e._e(),e.range?i("span",{staticClass:"slider__handle",style:e.rangeEndHandleStyle,attrs:{tabindex:"0",role:"slider","aria-valuemin":e.min,"aria-valuenow":"value = value[1] : null","aria-valuemax":"max","aria-labelledby":e.ariaLabelledBy},on:{mousedown:function(t){return e.onHandleMouseDown(t,1)},keydown:function(t){return e.onHandleKeyDown(t,1)}}}):e._e()])},j=[],H=i("2909"),T={props:{value:[Number,Array],min:{type:Number,default:0},max:{type:Number,default:100},orientation:{type:String,default:"horizontal"},step:{type:Number,default:null},range:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},ariaLabelledBy:{type:String,default:null}},dragging:!1,handleIndex:null,initX:null,initY:null,barWidth:null,barHeight:null,dragListener:null,mouseupListener:null,beforeDestroy:function(){this.unbindDragListeners()},methods:{updateDomData:function(){var e=this.$refs.container.getBoundingClientRect(),t=document.documentElement;this.initX=e.left+(window.pageXOffset||t.scrollLeft)-(t.clientLeft||0),this.initY=e.top+(window.pageYOffset||t.scrollTop)-(t.clientTop||0),this.barWidth=this.$refs.container.offsetWidth,this.barHeight=this.$refs.container.offsetHeight},setValueFromHandlePosition:function(e,t){var i=(this.max-this.min)*(t/100)+this.min;this.range?this.step?this.handleStepChange(e,i,this.value[this.handleIndex]):this.updateModel(e,i):this.step?this.handleStepChange(e,i,this.value):this.updateModel(e,i)},onSlide:function(e){var t=this.horizontal?100*(e.pageX-this.initX)/this.barWidth:100*(this.initY+this.barHeight-e.pageY)/this.barHeight;this.setValueFromHandlePosition(e,t)},handleStepChange:function(e,t,i){var n=t-i,o=i;n<0?o=i+Math.ceil(t/this.step-i/this.step)*this.step:n>0&&(o=i+Math.floor(t/this.step-i/this.step)*this.step),this.updateModel(e,o)},updateModel:function(e,t){var i,n=t;this.range?(0===this.handleIndex?n<this.min?n=this.min:n>=this.value[1]&&(n=this.value[1]):n>this.max?n=this.max:n<=this.value[0]&&(n=this.value[0]),i=Object(H["a"])(this.value),i[this.handleIndex]=Math.floor(n)):(n<this.min?n=this.min:n>this.max&&(n=this.max),i=Math.floor(n)),this.$emit("input",i),this.$emit("change",i)},onBarClick:function(e){this.disabled||e.target.classList.contains("slider__handle")||(this.updateDomData(),this.onSlide(e))},onHandleMouseDown:function(e,t){this.disabled||(this.dragging=!0,this.updateDomData(),this.handleIndex=t,this.bindDragListeners(),e.preventDefault())},onHandleKeyDown:function(e,t){switch(this.handleIndex=t,e.which){case 40:this.vertical&&(this.decrementValue(e,t),e.preventDefault());break;case 38:this.vertical&&(this.incrementValue(e,t),e.preventDefault());break;case 37:this.horizontal&&(this.decrementValue(e,t),e.preventDefault());break;case 39:this.horizontal&&(this.incrementValue(e,t),e.preventDefault());break;default:break}},decrementValue:function(e,t){var i;i=this.range?this.step?this.value[t]-this.step:this.value[t]-1:this.step?this.value-this.step:this.value-1,this.updateModel(e,i),e.preventDefault()},incrementValue:function(e,t){var i;i=this.range?this.step?this.value[t]+this.step:this.value[t]+1:this.step?this.value+this.step:this.value+1,this.updateModel(e,i),e.preventDefault()},bindDragListeners:function(){var e=this;this.dragListener||(this.dragListener=function(t){e.dragging&&e.onSlide(t)},document.addEventListener("mousemove",this.dragListener)),this.mouseupListener||(this.mouseupListener=function(t){e.dragging&&(e.dragging=!1,e.$emit("slideend",{originalEvent:t,values:e.value}))},document.addEventListener("mouseup",this.mouseupListener))},unbindDragListeners:function(){this.dragListener&&(document.removeEventListener("mousemove",this.dragListener),this.dragListener=null),this.mouseupListener&&(document.removeEventListener("mouseup",this.mouseupListener),this.mouseupListener=null)}},computed:{containerClass:function(){return["slider",{"slider--disabled":this.disabled,"slider--horizontal":"horizontal"===this.orientation,"slider--vertical":"vertical"===this.orientation}]},horizontal:function(){return"horizontal"===this.orientation},vertical:function(){return"vertical"===this.orientation},rangeStyle:function(){return this.range?this.horizontal?{left:this.rangeStartPosition+"%",width:this.rangeEndPosition-this.rangeStartPosition+"%"}:{bottom:this.rangeStartPosition+"%",height:this.rangeEndPosition-this.rangeStartHandlePosition+"%"}:this.horizontal?{width:this.handlePosition+"%"}:{height:this.handlePosition+"%"}},handleStyle:function(){return this.horizontal?{left:this.handlePosition+"%"}:{bottom:this.handlePosition+"%"}},handlePosition:function(){return 0===this.value||this.value<this.min?0:this.value>this.max?100:100*(this.value-this.min)/(this.max-this.min)},rangeStartPosition:function(){return this.value?100*(this.value[0]<this.min?0:this.value[0]-this.min)/(this.max-this.min):0},rangeEndPosition:function(){return this.value?100*(this.value[1]>this.max?100:this.value[1]-this.min)/(this.max-this.min):0},rangeStartHandleStyle:function(){return this.horizontal?{left:this.rangeStartPosition+"%"}:{bottom:this.rangeStartPosition+"%"}},rangeEndHandleStyle:function(){return this.horizontal?{left:this.rangeEndPosition+"%"}:{bottom:this.rangeEndPosition+"%"}}}},B=T,N=(i("71b9"),Object(p["a"])(B,$,j,!1,null,null,null)),Y=N.exports;i("99af"),i("25f0"),i("4d90");function z(e){var t=Math.floor(e/3600),i=Math.floor((e-3600*t)/60),n=e-3600*t-60*i;return t>0?"".concat(t,":").concat(i.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0")):"".concat(i,":").concat(n.toString().padStart(2,0))}var U={components:{YouTube:I,Slider:Y,Button:f},props:{index:Number,video:Object},data:function(){return{player:null,videoLoaded:!1,duration:0,title:""}},computed:{playingVideo:function(){return this.$store.state.playingVideo},isPlaying:function(){return this.playingVideo.id===this.video.id},volume:{get:function(){return this.video.volume},set:function(e){this.player&&this.player.setVolume(this.video.volume),this.setVideoVolume({index:this.index,volume:e})}},range:{get:function(){return this.video.range},set:function(e){if(this.isPlaying){var t=this.player.getCurrentTime();this.range[0]>t&&this.player.seekTo(this.range[0])}this.setVideoRange({index:this.index,range:e})}},canMoveUp:function(){return this.index>0},canMoveDown:function(){return this.index<this.$store.state.videos.length-1},rangeStart:function(){return z(this.range[0])},rangeEnd:function(){return z(this.range[1])}},methods:Object(d["a"])({onVideoLoaded:function(e){var t=e.getDuration();this.videoLoaded=!1,t?(this.player=e,this.duration=t,this.title=this.player.getVideoData().title,-1!==this.video.volume&&-1!==this.video.range[0]&&-1!==this.video.range[1]||this.editVideo({index:this.index,volume:this.player.getVolume(),range:[0,t]}),this.isPlaying&&this.play(),this.videoLoaded=!0):this.removeVideo(this.index)}},Object(l["b"])(["editVideo","playVideo","removeVideo","playNextVideo","moveVideoUp","moveVideoDown","setVideoVolume","setVideoRange"]),{play:function(){this.player.setVolume(this.video.volume),this.player.seekTo(this.video.range[0],!0),this.player.playVideo(),document.title=this.title+" - YouTube Loop in Vuex"},onPlaying:function(){clearInterval(this.interval),this.interval=setInterval(this.trackStatus,100),this.playVideo(this.index)},onPaused:function(){clearInterval(this.interval)},onEnded:function(){clearInterval(this.interval),this.playNextVideo()},onError:function(){clearInterval(this.interval),this.removeVideo(this.index)},trackStatus:function(){if(this.player){var e=this.player.getCurrentTime();e>this.video.range[1]&&this.onEnded()}}}),watch:{playingVideo:function(e){this.player&&(this.isPlaying?this.play():(this.player.pauseVideo(),document.title="YouTube Loop in Vuex"))}},created:function(){this.interval=null}},R=U,A=(i("b52d"),Object(p["a"])(R,_,w,!1,null,null,null)),X=A.exports,K={name:"App",components:{Header:x,Video:X},computed:{hasVideo:function(){return this.$store.state.videos.length>0},videos:function(){return this.$store.state.videos}}},W=K,F=(i("5c0b"),Object(p["a"])(W,o,a,!1,null,null,null)),G=F.exports,J=(i("c740"),i("d81d"),i("a434"),i("0e44"));n["a"].use(l["a"]);var q=new l["a"].Store({plugins:[Object(J["a"])()],state:{videos:[],playingVideo:{id:-1}},mutations:{addVideo:function(e,t){e.videos.push(t)},removeVideo:function(e,t){e.videos.splice(t,1)},editVideo:function(e,t){var i=t.index,n=t.volume,o=void 0===n?100:n,a=t.range,r=void 0===a?[-1,-1]:a,s=e.videos[i];e.videos.splice(i,1,Object(d["a"])({},s,{volume:o,range:r}))},moveVideo:function(e,t){var i=t.index,n=t.moveUp,o=void 0===n||n,a=e.videos[i];e.videos.splice(i,1),e.videos.splice(i+(o?-1:1),0,a)},playVideo:function(e,t){var i=t.index,n=void 0===i?-1:i,o=t.forceUpdate,a=void 0!==o&&o;-1===n?-1!==e.playingVideo.id&&(e.playingVideo={id:-1}):(e.videos[n].id!==e.playingVideo.id||a)&&(e.playingVideo={id:e.videos[n].id})}},actions:{addVideo:function(e,t){var i=e.commit,n=e.state,o=t.youtubeId,a=t.volume,r=void 0===a?-1:a,s=t.range,d=void 0===s?[-1,-1]:s,l=Math.max.apply(Math,n.videos.map((function(e){return e.id}))),u={id:l+1,youtubeId:o,volume:r,range:d};i("addVideo",u)},removeVideo:function(e,t){var i=e.commit;i("removeVideo",t)},editVideo:function(e,t){var i=e.commit,n=t.index,o=t.volume,a=void 0===o?100:o,r=t.range,s=void 0===r?[-1,-1]:r;i("editVideo",{index:n,volume:a,range:s})},moveVideoUp:function(e,t){var i=e.commit;i("moveVideo",{index:t,moveUp:!0})},moveVideoDown:function(e,t){var i=e.commit;i("moveVideo",{index:t,moveUp:!1})},playVideo:function(e,t){var i=e.commit;i("playVideo",{index:t})},stopPlaying:function(e){var t=e.commit;t("playVideo",{index:-1})},playNextVideo:function(e){var t=e.commit,i=e.state,n=-1,o=i.videos.findIndex((function(e){return e.id===i.playingVideo.id}));n=o===i.videos.length-1?0:o+1,t("playVideo",{index:n,forceUpdate:!0})},playPreviousVideo:function(e){var t=e.commit,i=e.state,n=-1,o=i.videos.findIndex((function(e){return e.id===i.playingVideo.id}));n=0===o?i.videos.length-1:o-1,t("playVideo",{index:n,forceUpdate:!0})},setVideoVolume:function(e,t){var i=e.commit,n=e.state,o=t.index,a=t.volume,r=void 0===a?100:a,s=n.videos[o];i("editVideo",{index:o,volume:r,range:s.range})},setVideoRange:function(e,t){var i=e.commit,n=e.state,o=t.index,a=t.range,r=void 0===a?[-1,-1]:a,s=n.videos[o];i("editVideo",{index:o,volume:s.volume,range:r})}}});i("7e6a");n["a"].config.productionTip=!1,new n["a"]({store:q,render:function(e){return e(G)}}).$mount("#app")},"59fd":function(e,t,i){},"5c0b":function(e,t,i){"use strict";var n=i("9c0c"),o=i.n(n);o.a},"6dc8":function(e,t,i){},"71b9":function(e,t,i){"use strict";var n=i("6dc8"),o=i.n(n);o.a},"7e6a":function(e,t,i){},"999d":function(e,t,i){"use strict";var n=i("59fd"),o=i.n(n);o.a},"9c0c":function(e,t,i){},b52d:function(e,t,i){"use strict";var n=i("3b00"),o=i.n(n);o.a},eadf:function(e,t,i){"use strict";var n=i("04ed"),o=i.n(n);o.a}});
//# sourceMappingURL=app.723c3f6b.js.map